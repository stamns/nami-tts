# ============================================================================
# nami-tts Environment Configuration Template
# ============================================================================
# Copy this file to .env and customize values for your deployment.
# For local development, you can use most defaults as-is.
#
# IMPORTANT: The UI config file (.ui_config.json) is generated at runtime
# and should be added to .gitignore - do NOT commit it to version control!
# ============================================================================


# ============================================================================
# SERVICE AUTHENTICATION
# ============================================================================
# API key for Bearer token authentication (e.g., Authorization: Bearer <key>)
# Set a strong secret key for production deployments
# TTS_API_KEY is a legacy name, SERVICE_API_KEY is preferred
SERVICE_API_KEY=sk-nami-tts-your-secret-key
# TTS_API_KEY=sk-nami-tts-your-secret-key

# Secret key for encrypting UI configuration stored in .ui_config.json
# If not set, defaults to SERVICE_API_KEY
# Use a different value for additional security layer
# UI_CONFIG_SECRET=


# ============================================================================
# PROVIDER SELECTION & PRIORITY
# ============================================================================
# Default TTS provider to use (nanoai, google, azure, baidu, aliyun)
DEFAULT_TTS_PROVIDER=nanoai

# Comma-separated list of providers in priority order
# First available/configured provider will be used if primary fails
TTS_PROVIDER_PRIORITY=nanoai,google,azure,baidu,aliyun


# ============================================================================
# PROVIDER CREDENTIALS
# ============================================================================

# Google Text-to-Speech (gTTS)
# Generally does not require an API key for basic usage
# Kept for future Google Cloud API integration
GOOGLE_API_KEY=

# Azure Cognitive Services - Speech-to-Text
# Provide either AZURE_API_KEY + AZURE_REGION or AZURE_ENDPOINT
AZURE_API_KEY=
AZURE_REGION=
# Alternative: provide full endpoint instead of region:
# AZURE_ENDPOINT=https://your-region.tts.speech.microsoft.com

# Baidu Text-to-Speech (not fully implemented, reserved for future)
BAIDU_API_KEY=
BAIDU_SECRET_KEY=

# Aliyun (Alibaba Cloud) Text-to-Speech (not fully implemented, reserved for future)
ALIYUN_ACCESS_KEY_ID=
ALIYUN_ACCESS_KEY_SECRET=


# ============================================================================
# NETWORKING & CACHING
# ============================================================================

# HTTP request timeout in seconds (default: 30)
HTTP_TIMEOUT=30

# Number of retry attempts for failed HTTP requests (default: 2)
RETRY_COUNT=2

# HTTP(S) proxy URL (leave empty to disable)
# Format: http://proxy-host:port or https://proxy-host:port
# Example: http://127.0.0.1:7890
PROXY_URL=

# SSL certificate verification (default: true)
# Set to 'false' only in development/testing with self-signed certs
SSL_VERIFY=true

# Cache directory for models and audio (default: /tmp/cache)
# Must be writable. On Vercel, only /tmp is writable in serverless functions
# For local development, you can use './cache' or '/tmp/cache'
CACHE_DIR=/tmp/cache

# Model cache validity in seconds (default: 7200 = 2 hours)
# Also used as fallback value for MODELS_CACHE_TTL_SECONDS
CACHE_DURATION=7200

# Explicit model cache TTL (overrides CACHE_DURATION if set)
# Recommended: 7200 seconds (2 hours)
MODELS_CACHE_TTL_SECONDS=7200


# ============================================================================
# TIME SYNCHRONIZATION (for Vercel/Serverless Deployments)
# ============================================================================
# These settings help handle time drift in Serverless environments (Vercel, etc.)
# which can cause signature validation errors (e.g., error code 110023)

# Enable automatic time synchronization with upstream server (default: true)
TIME_SYNC_ENABLED=true

# Time drift threshold in seconds to trigger server time usage (default: 30)
# If local time differs from server by more than this, use server time for requests
TIME_DRIFT_THRESHOLD_SECONDS=30

# Interval between time sync checks in seconds (default: 300 = 5 minutes)
TIME_SYNC_INTERVAL_SECONDS=300

# URL to use for time synchronization (default: https://bot.n.cn)
# This must be an external endpoint that returns HTTP Date header
TIME_SYNC_URL=https://bot.n.cn

# Use server time for timestamp generation when drift is detected (default: true)
# If enabled and drift exceeds threshold, request timestamps use server time
TIME_SYNC_USE_SERVER_TIME_ON_DRIFT=true


# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Server port (default: 5001)
PORT=5001

# Debug mode (default: false)
# Set to 'true' only in local development, never in production
DEBUG=false

# Logging level (default: INFO)
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
